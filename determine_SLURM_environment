

if [[ -e $WORKDIR/cpu_partition ]] && [[ -e $WORKDIR/gpu_partition ]]  && [[ -e $WORKDIR/largemem_partition ]]
then
    cpu_partition_name=`cat $WORKDIR/cpu_partition`
    echo "${cpu_partition_name} partition for CPU jobs found."
    
    gpu_partition_name=`cat $WORKDIR/gpu_partition`
    echo "${gpu_partition_name} partition for GPU jobs found."

    largemem_partition_name=`cat $WORKDIR/largemem_partition`
    echo "${largemem_partition_name} partition for large memory (>512GB) jobs found."

    read -e -p "Do you accept this partition setup (y/n):" -i "y" accept
    if  [ $accept != y ]
    then
        echo "You will need to setup partitions now."
        echo "Available queues are:"
        sinfo -s
        read -p "Enter the name of partition with CPU nodes:" cpu_partition_name
        read -p "Enter the name of partition with GPU nodes:" gpu_partition_name
        read -p "Enter the name of partition with large memory nodes:" largemem_partition_name
        echo ${cpu_partition_name} > $WORKDIR/cpu_partition
        echo ${gpu_partition_name} > $WORKDIR/gpu_partition
        echo ${largemem_partition_name} > $WORKDIR/largemem_partition
    fi
else
    echo "You will need to setup partitions now."
    echo "Available queues are:" 
    sinfo -s
    read -p "Enter the name of partition with CPU nodes:" cpu_partition_name
    read -p "Enter the name of partition with GPU nodes:" gpu_partition_name
    read -p "Enter the name of partition with large memory nodes:" largemem_partition_name
    echo ${cpu_partition_name} > $WORKDIR/cpu_partition
    echo ${gpu_partition_name} > $WORKDIR/gpu_partition    
    echo ${largemem_partition_name} > $WORKDIR/largemem_partition
fi

echo ${cpu_partition_name} > $WORKDIR/${cpu_partition_name}_partition
echo ${gpu_partition_name} > $WORKDIR/${gpu_partition_name}_partition
echo ${largemem_partition_name} > $WORKDIR/${largemem_partition_name}_partition
