cores=`cat $WORKDIR/cores`
Vini_queue=`cat $WORKDIR/Vini_queue`

cd $WORKDIR

echo "#! /bin/bash"                           > Vina  #prepare header file for Autodock Vina related jobs
echo "#SBATCH --time=08:00:00"               >> Vina
echo "#SBATCH --cpus-per-task=8"             >> Vina
echo "#SBATCH --mem=4gb"                     >> Vina
echo "#SBATCH --partition="$Vini_queue       >> Vina
chmod u+x                                       Vina

echo "#! /bin/bash"                         > meeko  #prepare SLURM script for Meeko
echo "#SBATCH --job-name=meeko"            >> meeko
echo "#SBATCH --time=01:00:00"             >> meeko
echo "#SBATCH --output=$WORKDIR/meeko.out" >> meeko
echo "#SBATCH --error=$WORKDIR/meeko.err"  >> meeko
echo "#SBATCH --cpus-per-task=1"           >> meeko
echo "#SBATCH --mem=2gb"                   >> meeko
echo "#SBATCH --partition="$Vini_queue     >> meeko
chmod u+x                                     meeko

echo "#!/bin/bash"                              > alphafold  #prepare SLURM script for AlphaFold
echo "#SBATCH --nodes=1"                       >> alphafold
echo "#SBATCH --exclusive"                     >> alphafold
echo "#SBATCH --ntasks-per-node=1"             >> alphafold
echo "#SBATCH --cpus-per-task=48"              >> alphafold
echo "#SBATCH --partition="$Vini_queue         >> alphafold
echo "#SBATCH --time=05-00:00:00"              >> alphafold
chmod u+x                                         alphafold

echo "#!/bin/bash"                            > rosetta_relax #prepare relax static script
echo "#SBATCH --job-name=relax"              >> rosetta_relax
echo "#SBATCH --nodes=1"                     >> rosetta_relax
echo "#SBATCH --cpus-per-task=4"             >> rosetta_relax
echo "#SBATCH --mem=4gb"                     >> rosetta_relax
echo "#SBATCH --partition="$Vini_queue       >> rosetta_relax
echo "#SBATCH --time=24:00:00"               >> rosetta_relax
echo "#SBATCH --output=rosetta_relax.out"    >> rosetta_relax
echo "#SBATCH --error=rosetta_relax.err"     >> rosetta_relax
cat $vini_dir/rosetta_relax                  >> rosetta_relax
chmod u+x rosetta_relax

echo "#!/bin/bash"                            > rosetta_docking #prepare docking static script
echo "#SBATCH --job-name=docking"            >> rosetta_docking
echo "#SBATCH --nodes=1"                     >> rosetta_docking
echo "#SBATCH --cpus-per-task=4"             >> rosetta_docking
echo "#SBATCH --mem=4gb"                     >> rosetta_docking
echo "#SBATCH --partition="$Vini_queue       >> rosetta_docking
echo "#SBATCH --time=24:00:00"               >> rosetta_docking
echo "#SBATCH --output=rosetta_docking.out"  >> rosetta_docking
echo "#SBATCH --error=rosetta_docking.err"   >> rosetta_docking
cat $vini_dir/rosetta_docking                >> rosetta_docking
chmod u+x rosetta_docking

echo "#!/bin/bash"                            > rosetta_grafting #prepare grafting script
echo "#SBATCH --job-name=grafting"           >> rosetta_grafting
echo "#SBATCH --nodes=1"                     >> rosetta_grafting
echo "#SBATCH --cpus-per-task=4"             >> rosetta_grafting
echo "#SBATCH --mem=4gb"                     >> rosetta_grafting
echo "#SBATCH --partition="$Vini_queue       >> rosetta_grafting
echo "#SBATCH --time=48:00:00"               >> rosetta_grafting
echo "#SBATCH --output=rosetta_grafting.out" >> rosetta_grafting
echo "#SBATCH --error=rosetta_grafting.err"  >> rosetta_grafting
cat $vini_dir/rosetta_grafting               >> rosetta_grafting
chmod u+x rosetta_grafting

echo "#!/bin/bash"                            > rosetta_antibody #prepare antibody script
echo "#SBATCH --job-name=antibody"           >> rosetta_antibody
echo "#SBATCH --nodes=1"                     >> rosetta_antibody
echo "#SBATCH --cpus-per-task=4"             >> rosetta_antibody
echo "#SBATCH --mem=4gb"                     >> rosetta_antibody
echo "#SBATCH --partition="$Vini_queue       >> rosetta_antibody
echo "#SBATCH --time=48:00:00"               >> rosetta_antibody
echo "#SBATCH --output=rosetta_antibody.out" >> rosetta_antibody
echo "#SBATCH --error=rosetta_antibody.err"  >> rosetta_antibody
cat $vini_dir/rosetta_antibody               >> rosetta_antibody
chmod u+x rosetta_antibody

echo "#!/bin/bash"                            > rosetta_relax.mpi #prepare relax MPI script
echo "#SBATCH --job-name=relax"              >> rosetta_relax.mpi
echo "#SBATCH --nodes=1"                     >> rosetta_relax.mpi
echo "#SBATCH --ntasks=12"                   >> rosetta_relax.mpi
echo "#SBATCH --ntasks-per-core=1"           >> rosetta_relax.mpi
echo "#SBATCH --mem=12gb"                    >> rosetta_relax.mpi
echo "#SBATCH --partition="$Vini_queue       >> rosetta_relax.mpi
echo "#SBATCH --time=24:00:00"               >> rosetta_relax.mpi
echo "#SBATCH --output=rosetta_relax.out"    >> rosetta_relax.mpi
echo "#SBATCH --error=rosetta_relax.err"     >> rosetta_relax.mpi
cat $vini_dir/rosetta_relax.mpi              >> rosetta_relax.mpi
chmod u+x rosetta_relax.mpi

echo "#!/bin/bash"                            > rosetta_docking.mpi #prepare docking MPI script
echo "#SBATCH --job-name=docking"            >> rosetta_docking.mpi
echo "#SBATCH --nodes=1"                     >> rosetta_docking.mpi
echo "#SBATCH --ntasks=12"                   >> rosetta_docking.mpi
echo "#SBATCH --ntasks-per-core=1"           >> rosetta_docking.mpi
echo "#SBATCH --mem=12gb"                    >> rosetta_docking.mpi
echo "#SBATCH --partition="$Vini_queue       >> rosetta_docking.mpi
echo "#SBATCH --time=24:00:00"               >> rosetta_docking.mpi
echo "#SBATCH --output=rosetta_docking.out"  >> rosetta_docking.mpi
echo "#SBATCH --error=rosetta_docking.err"   >> rosetta_docking.mpi
cat $vini_dir/rosetta_docking.mpi            >> rosetta_docking.mpi
chmod u+x rosetta_docking.mpi

echo "#!/bin/bash"                            > rosetta_grafting.mpi #prepare grafting script
echo "#SBATCH --job-name=grafting"           >> rosetta_grafting.mpi
echo "#SBATCH --nodes=1"                     >> rosetta_grafting.mpi
echo "#SBATCH --ntasks-per-node=12"          >> rosetta_grafting.mpi
echo "#SBATCH --ntasks-per-core=1"           >> rosetta_grafting.mpi
echo "#SBATCH --mem=12gb"                    >> rosetta_grafting.mpi
echo "#SBATCH --partition="$Vini_queue       >> rosetta_grafting.mpi
echo "#SBATCH --time=48:00:00"               >> rosetta_grafting.mpi
echo "#SBATCH --output=rosetta_grafting.out" >> rosetta_grafting.mpi
echo "#SBATCH --error=rosetta_grafting.err"  >> rosetta_grafting.mpi
cat $vini_dir/rosetta_grafting.mpi           >> rosetta_grafting.mpi
chmod u+x rosetta_grafting.mpi

echo "#!/bin/bash"                            > rosetta_antibody.mpi #prepare antibody script
echo "#SBATCH --job-name=antibody"           >> rosetta_antibody.mpi
echo "#SBATCH --nodes=1"                     >> rosetta_antibody.mpi
echo "#SBATCH --ntasks-per-node=12"          >> rosetta_antibody.mpi
echo "#SBATCH --ntasks-per-core=1"           >> rosetta_antibody.mpi
echo "#SBATCH --mem=12Gb"                    >> rosetta_antibody.mpi
echo "#SBATCH --partition="$Vini_queue       >> rosetta_antibody.mpi
echo "#SBATCH --time=48:00:00"               >> rosetta_antibody.mpi
echo "#SBATCH --output=rosetta_antibody.out" >> rosetta_antibody.mpi
echo "#SBATCH --error=rosetta_antibody.err"  >> rosetta_antibody.mpi
cat $vini_dir/rosetta_antibody.mpi           >> rosetta_antibody.mpi
chmod u+x rosetta_antibody.mpi

echo "#!/bin/bash"                            > rosetta_log #prepare log script
echo "#SBATCH --job-name=log_data"           >> rosetta_log
echo "#SBATCH --nodes=1"                     >> rosetta_log
echo "#SBATCH --cpus-per-task=1"             >> rosetta_log
echo "#SBATCH --mem=1gb"                     >> rosetta_log
echo "#SBATCH --partition="$Vini_queue       >> rosetta_log
echo "#SBATCH --time=00:00:30"               >> rosetta_log
echo "#SBATCH --output=rosetta_log.out"      >> rosetta_log
echo "#SBATCH --error=rosetta_log.err"       >> rosetta_log
cat $vini_dir/rosetta_log                    >> rosetta_log
chmod u+x rosetta_log

echo "#! /bin/bash"                           > $vini_dir/genex
echo "#SBATCH --job-name=genex"              >> $vini_dir/genex
echo "#SBATCH --nodes=1"                     >> $vini_dir/genex
echo "#SBATCH --ntasks-per-node="$cores      >> $vini_dir/genex
echo "#SBATCH --cpus-per-task=1"             >> $vini_dir/genex
echo "#SBATCH --mem=48gb"                    >> $vini_dir/genex
echo "#SBATCH --partition="$Vini_queue       >> $vini_dir/genex
echo "#SBATCH --time=24:00:00"               >> $vini_dir/genex
echo "#SBATCH --output=genex.out"            >> $vini_dir/genex
cat $vini_dir/calculate_z_scores_script      >> $vini_dir/genex
chmod u+x                                       $vini_dir/genex

#echo "#! /bin/bash"                           > sander
#echo "#SBATCH --job-name=sander"             >> sander
#echo "#SBATCH --output=sander.out"           >> sander
#echo "#SBATCH --time=96:00:00"               >> sander
#echo "#SBATCH --exclusive"                   >> sander
#echo "#SBATCH --nodes=1"                     >> sander
#echo "#SBATCH --ntasks-per-node="$cores      >> sander
#echo "#SBATCH --cpus-per-task=1"             >> sander
#echo "#SBATCH --mem=48gb"                    >> sander
#echo "#SBATCH --partition="$Vini_queue       >> sander
#cat $vini_dir/sander_script                  >> sander
#chmod u+x                                       sander

echo "#! /bin/bash"                           > MD_prep  #prepare Gromacs scripts
echo "#SBATCH --job-name=MD_prep"            >> MD_prep
echo "#SBATCH --output=MD_prep.out"          >> MD_prep
echo "#SBATCH --time=48:00:00"               >> MD_prep
echo "#SBATCH --cpus-per-task=1"             >> MD_prep
echo "#SBATCH --mem=2gb"                     >> MD_prep
echo "#SBATCH --partition="$Vini_queue       >> MD_prep
cat $vini_dir/MD_prep                        >> MD_prep
chmod u+x                                       MD_prep

echo "#! /bin/bash"                           > MD_run
echo "#SBATCH --job-name=MD_run"             >> MD_run
echo "#SBATCH --output=MD_run.out"           >> MD_run
echo "#SBATCH --time=48:00:00"               >> MD_run
echo "#SBATCH --exclusive"                   >> MD_run
echo "#SBATCH --nodes=1"                     >> MD_run
echo "#SBATCH --cpus-per-task=24"            >> MD_run
echo "#SBATCH --mem=48gb"                    >> MD_run
echo "#SBATCH --partition="$Vini_queue       >> MD_run
echo "export GMX_MAXCONSTRWARN=-1"           >> MD_run
cat $vini_dir/MD_run                         >> MD_run
chmod u+x                                       MD_run

echo "#! /bin/bash"                           > ndx
echo "#SBATCH --job-name=ndx"                >> ndx
echo "#SBATCH --output=ndx.out"              >> ndx
echo "#SBATCH --time=48:00:00"               >> ndx
echo "#SBATCH --ntasks-per-node=1"           >> ndx
echo "#SBATCH --cpus-per-task=1"             >> ndx
echo "#SBATCH --mem=2gb"                     >> ndx
echo "#SBATCH --partition="$Vini_queue       >> ndx
cat $vini_dir/ndx                            >> ndx
chmod u+x                                       ndx

echo "#! /bin/bash"                            > polar
echo "#SBATCH --job-name=polar"               >> polar
echo "#SBATCH --output=polar.out"             >> polar
echo "#SBATCH --time=48:00:00"                >> polar
echo "#SBATCH --ntasks-per-node=1"            >> polar
echo "#SBATCH --cpus-per-task=16"             >> polar
echo "#SBATCH --mem=32gb"                     >> polar
echo "#SBATCH --partition="$Vini_queue        >> polar
echo "export OMP_NUM_THREADS=16"              >> polar
cat $vini_dir/polar                           >> polar
chmod u+x polar

echo "#! /bin/bash"                            > apolar
echo "#SBATCH --job-name=apolar"              >> apolar
echo "#SBATCH --output=apolar.out"            >> apolar
echo "#SBATCH --time=48:00:00"                >> apolar
echo "#SBATCH --ntasks-per-node=1"            >> apolar
echo "#SBATCH --cpus-per-task=8"              >> apolar
echo "#SBATCH --mem=16gb"                     >> apolar
echo "#SBATCH --partition="$Vini_queue        >> apolar
echo "export OMP_NUM_THREADS=8"               >> apolar
cat $vini_dir/apolar                          >> apolar
chmod u+x                                        apolar

echo "#! /bin/bash"                            > potential
echo "#SBATCH --job-name=potent"              >> potential
echo "#SBATCH --output=potent.out"            >> potential
echo "#SBATCH --time=48:00:00"                >> potential
echo "#SBATCH --ntasks-per-node=1"            >> potential
echo "#SBATCH --cpus-per-task=8"              >> potential
echo "#SBATCH --mem=16gb"                     >> potential
echo "#SBATCH --partition="$Vini_queue        >> potential
echo "export OMP_NUM_THREADS=8"               >> potential
cat $vini_dir/potent                          >> potential
chmod u+x                                        potential

echo "#! /bin/bash"                            > FBE
echo "#SBATCH --job-name=FBE"                 >> FBE
echo "#SBATCH --output=FBE.out"               >> FBE
echo "#SBATCH --time=48:00:00"                >> FBE
echo "#SBATCH --ntasks-per-node=1"            >> FBE
echo "#SBATCH --cpus-per-task=1"              >> FBE
echo "#SBATCH --mem=2gb"                      >> FBE
echo "#SBATCH --partition="$Vini_queue        >> FBE
echo "source $INSTALL/miniconda2/bin/activate" >> FBE
cat $vini_dir/FBE                             >> FBE
chmod u+x                                        FBE

cd $vini_dir
